<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Compress and reduce the size of your files online. Securely upload your files and get optimized versions with ReducePNG.com."
    />
    <title>File Compression - ReducePNG.com | Compress Files Online</title>
    <link rel="icon" href="/reducepng.png" type="image/x-icon" />
    <meta
      name="keywords"
      content="file compression, compress files, reduce file size, file optimization, image compression, optimize images, online compression, ReducedPNG.com"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.16/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <style>
      .drag-drop-area {
        border: 2px dashed #ccc;
        padding: 20px;
        cursor: pointer;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #fff;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        animation: spin 1s linear infinite;
        display: inline-block;
        margin-left: 10px;
        vertical-align: middle;
      }

      .hidden {
        display: none;
      }
    </style>
  </head>
  <body class="bg-gray-100 flex items-center justify-center h-screen">
    <div class="w-full max-w-md">
      <form
        action=""
        method="post"
        enctype="multipart/form-data"
        class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4"
      >
        <div class="mb-4">
          <h1 class="font-bold text-2xl mb-2 text-gray-700">
            Upload your files
          </h1>
          <p class="text-gray-600 text-sm">
            Files are securely uploaded over an encrypted connection. Files stay
            safe and private. Once compressed, they will automatically be
            deleted.
          </p>
        </div>
        <div class="mb-6">
          <label class="block text-gray-700 text-sm font-bold mb-2" for="file">
            Choose a file or drag it here
          </label>
          <div
            class="drag-drop-area"
            onclick="document.getElementById('file-input').click()"
          >
            <input
              type="file"
              name="file"
              multiple
              class="hidden"
              id="file-input"
            />
            <div id="drop-area-text" class="text-gray-500 text-lg text-center">
              Drop files here
            </div>
          </div>
        </div>
        <div class="flex items-center justify-between">
          <button
            class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full"
            type="submit"
            onclick="document.getElementById('spinner').classList.remove('hidden');"
          >
            Upload
            <div id="spinner" class="spinner hidden"></div>
          </button>
        </div>
      </form>
      <p class="text-center text-gray-500 text-xs">
        &copy;2023 ReducePNG.com. All rights reserved.
        <a
          href="https://github.com/MasterCryptoLord/ReducePNG"
          target="_blank"
          style="text-decoration: underline"
          >Open Source</a
        >.
      </p>
    </div>

    <script>
      const dropArea = document.querySelector(".drag-drop-area");
      const dropAreaText = document.querySelector("#drop-area-text");
      const fileInput = document.querySelector("#file-input");

      function updateDropAreaText() {
        if (fileInput.files.length > 0) {
          let fileNames = Array.from(fileInput.files).map((file) => file.name);
          let displayedFileNames;

          if (fileNames.length > 3) {
            displayedFileNames =
              fileNames.slice(0, 3).join(", ") +
              ` and ${fileNames.length - 3} more files...`;
          } else {
            displayedFileNames = fileNames.join(", ");
          }

          dropAreaText.textContent = "Selected Files: " + displayedFileNames;
        } else {
          dropAreaText.textContent = "Choose a file or drag it here";
        }
      }

      dropArea.addEventListener("dragenter", (e) => {
        e.preventDefault();
        dropArea.classList.add("bg-gray-200");
        dropAreaText.textContent = "Drop files here";
      });

      dropArea.addEventListener("dragleave", (e) => {
        e.preventDefault();
        dropArea.classList.remove("bg-gray-200");
        updateDropAreaText();
      });

      dropArea.addEventListener("dragover", (e) => {
        e.preventDefault();
      });

      dropArea.addEventListener("drop", (e) => {
        e.preventDefault();
        dropArea.classList.remove("bg-gray-200");
        const files = e.dataTransfer.files;
        fileInput.files = files;
        updateDropAreaText();
      });

      fileInput.addEventListener("change", () => {
        updateDropAreaText();
      });
    </script>
  </body>
</html>
